(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t(1),r=t(15),s=t.n(r),o=t(6),u=t(3),i=function(e){var n=e.value,t=e.onChange;return Object(a.jsxs)("div",{children:["filtering with: ",Object(a.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.onSubmit,t=e.newName,c=e.newNumber,r=e.onChangeName,s=e.onChangeNumber;return Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:t,onChange:r})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:c,onChange:s})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.onClick;return Object(a.jsxs)(a.Fragment,{children:[n.name," \xa0\xa0",n.number," \xa0\xa0",Object(a.jsx)("button",{onClick:t,children:"delete"})]})},m=function(e){var n=e.toShow,t=e.onClick;return n.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(d,{person:e,onClick:t(e.id)},e.id)},e.id)}))},b=t(4),j=t.n(b),h="http://localhost:3001/api/persons",f={getAll:function(){return j.a.get(h).then((function(e){return e.data}))},create:function(e){return j.a.post(h,e).then((function(e){return e.data}))},del:function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))}},g=function(e){var n=e.message,t=e.messageClass;return""===n?null:Object(a.jsx)("div",{className:t,children:n})},O=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],s=Object(c.useState)(""),d=Object(u.a)(s,2),b=d[0],j=d[1],h=Object(c.useState)(""),O=Object(u.a)(h,2),v=O[0],p=O[1],C=Object(c.useState)(""),x=Object(u.a)(C,2),w=x[0],k=x[1],N=Object(c.useState)({message:"",messageClass:"nothing"}),S=Object(u.a)(N,2),A=S[0],y=S[1];Object(c.useEffect)((function(){f.getAll().then((function(e){return r(e)}))}),[]);var D=function(e){return t.find((function(n){return n.name===e.name}))},T=""===w?t:t.filter((function(e){return e.name.toLowerCase().startsWith(w.toLowerCase())}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phoneebook"}),Object(a.jsx)(g,{message:A.message,messageClass:A.messageClass}),Object(a.jsx)(i,{value:w,onChange:function(e){console.log(e.target.value),k(e.target.value)}}),Object(a.jsx)("h3",{children:"Add a new"}),Object(a.jsx)(l,{onSubmit:function(e){e.preventDefault();var n={name:b,number:v},a=D(n);if(a){var c="".concat(n.name," is already added to the book! Replace the old \n          number with the new one?");if(window.confirm(c)){var s=Object(o.a)(Object(o.a)({},a),{},{number:n.number}),u=a.id;f.update(u,s).then((function(e){r(t.map((function(n){return n.id!==u?n:e})))})).catch((function(e){var n=t.filter((function(e){return e.id!==u}));r(n),y({message:"Person ".concat(s.name," was already deleted!"),messageClass:"errorDeleted"}),setTimeout((function(){y({message:"",messageClass:"nothing"})}),5e3)})),y({message:"".concat(s.name," data are updated"),messageClass:"personUpdate"}),setTimeout((function(){return y({message:"",messageClass:"nothing"})}),4e3),j(""),p("")}else j(""),p("")}else f.create(n).then((function(e){return r(t.concat(e))})),y({message:"Added ".concat(n.name),messageClass:"personAdd"}),setTimeout((function(){return y({message:"",messageClass:"nothing"})}),4e3),j(""),p("")},newName:b,newNumber:v,onChangeName:function(e){console.log(e.target.value),j(e.target.value)},onChangeNumber:function(e){console.log(e.target.value),p(e.target.value)}}),Object(a.jsx)("h3",{children:"Numbers"}),Object(a.jsx)(m,{toShow:T,onClick:function(e){return function(){var n=t.find((function(n){return n.id===e}));window.confirm('Delete  "'.concat(n.name,'" ?'))&&f.del(e).then((function(n){var a=t.filter((function(n){return n.id!==e}));r(a)}))}}})]})};t(38);s.a.render(Object(a.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.0f1b87ab.chunk.js.map