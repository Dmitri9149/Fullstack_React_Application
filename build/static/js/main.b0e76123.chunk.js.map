{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Filter","props","value","onChange","PersonForm","onSubmit","newName","newNumber","onChangeName","onChangeNumber","type","Person","person","onClick","name","number","Persons","toShow","map","id","baseUrl","logger","getAll","axios","get","then","response","data","create","newObject","post","del","delete","update","put","Notification","message","messageClass","className","App","useState","persons","setPersons","setNewName","setNewNumber","newFilter","setNewFilter","notify","setNotify","useEffect","personService","timeoutAndRestore","timeout","setTimeout","existingItem","item","find","personsToShow","filter","toLowerCase","startsWith","event","console","log","target","preventDefault","personObject","existingPerson","warning","window","confirm","changedPerson","catch","error","restorePersons","returnedPerson","concat","newPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b0e76123.chunk.js","sourcesContent":["import React from 'react'\n\n\nconst Filter = (props) => {\n    const {value, onChange} = props\n    return (\n        <div>\n        filtering with: <input value = {value} onChange = {onChange} />\n        </div>\n)\n\n}\nexport default Filter","import React from 'react'\n\nconst PersonForm = (props) => {\n    const{onSubmit, newName, newNumber, \n        onChangeName,onChangeNumber} = props\n    return (\n        <form onSubmit = {onSubmit}>\n            <div>\n            name: <input value = {newName} onChange = {onChangeName}/>\n            </div>\n            <div>\n            number: <input value = {newNumber} onChange = {onChangeNumber}/>\n            </div>\n            <div>\n            <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\n\nexport default PersonForm","import React from 'react'\n\nconst Person = ({ person, onClick }) => {\n  return (\n\n    <>\n        {person.name} &nbsp;&nbsp;\n        {person.number} &nbsp;&nbsp;\n        <button onClick={onClick}>delete</button>\n    </>\n\n  )\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({toShow, onClick}) => \n        toShow.map(person => {\n            return (\n            <li key = {person.id}>\n            <Person key = {person.id}\n                    person = {person}\n                    onClick = {onClick(person.id)}\n            />\n            </li>\n            )\n        })\n\n\nexport default Persons","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst del = (id) => {\n  const request = axios.delete (`${baseUrl}/${id}`)\n  return request.then( response => response.data)\n\n}\n\nconst update = (id, newObject ) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst logger = {\n  getAll, \n  create,\n  del,\n  update\n}\n\nexport default logger","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\n\nconst Notification = ({message, messageClass}) => {\n  if (message === '') {\n    return null\n  }\n  return (\n    <div className = {messageClass}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [notify, setNotify]= useState({message:'', messageClass:'nothing'})\n\n  useEffect(()=> {\n    personService\n      .getAll()\n        .then(persons => setPersons(persons))\n  },[])\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const timeoutAndRestore = (timeout) => {\n    setTimeout(() => setNotify({message:'', messageClass:'nothing'}), timeout)\n    setNewName('')\n    setNewNumber('')\n  } \n  const addName = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    const existingPerson = existingItem(personObject)\n    if (!existingPerson) {\n      personService \n        .create(personObject)\n          .then(returnedPerson => {\n            setPersons(persons.concat(returnedPerson))\n            setNotify(\n              {message:`Added ${personObject.name}`, messageClass:'personAdd'}\n            )\n            timeoutAndRestore(4000)  \n          })\n          .catch (error => {\n            console.log(error.response.data)\n            setNotify(\n              {message:error.response.data.error, messageClass:\"validationError\"\n            })\n            timeoutAndRestore(4000)\n          })    \n    } else {\n        const name = personObject.name\n        const warning = `${name} is already added to the book! Replace the old \n          number with the new one?`\n        if (window.confirm(warning)) {\n            \n          const changedPerson = { ...existingPerson, number:personObject.number }\n          const id = existingPerson.id\n          personService\n            .update(id, changedPerson)\n            .then(response => {\n              setPersons(persons.map(person => \n                person.id !== id ? person : response))\n              setNotify(\n                {message:`${changedPerson.name} data are updated`, messageClass:'personUpdate'}\n                )\n              timeoutAndRestore(4000)\n            })\n            .catch(error => {\n              const restorePersons = persons.filter(person => person.id !== id)\n              setPersons(restorePersons)\n              setNotify(\n                {message:`Person ${changedPerson.name} was already deleted!`, messageClass:\"errorDeleted\"\n              })\n              timeoutAndRestore(4000)\n            })                \n        } else {\n            setNewName('')\n            setNewNumber('')\n\n        }\n    }\n\n  }\n\n  const deletePerson = (id) => {\n    return () => {\n      const person = persons.find(person => person.id === id)\n      if (window.confirm(`Delete  \"${person.name}\" ?`)) {\n        personService\n          .del(id)\n            .then(data => {\n              const newPersons = persons.filter(person => person.id!==id )\n              setPersons(newPersons)\n            })\n            setNotify(\n              {message:`${person.name} data are deleted`, messageClass:'personDelete'}\n            )\n            timeoutAndRestore(4000)  \n      }\n    }\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setNewFilter(event.target.value)\n  }\n\n  const existingItem = (item) => persons.find(person => person.name === item.name)\n\n\nconst personsToShow =  newFilter === \"\"\n? persons\n: persons.filter(person => person.name.toLowerCase().startsWith(newFilter.toLowerCase()));\n\n\n\n  return (\n    <div>\n      <h2>Phoneebook</h2>\n      <Notification \n        message = {notify.message}\n        messageClass = {notify.messageClass}\n      />\n\n      <Filter value = {newFilter} onChange = {handleFilterChange}/>\n\n      <h3>Add a new</h3>\n\n      <PersonForm onSubmit = {addName} newName = {newName}\n      newNumber = {newNumber} onChangeName = {handleNameChange} \n      onChangeNumber = {handleNumberChange} /> \n\n      <h3>Numbers</h3>\n\n      <Persons toShow ={personsToShow}\n               onClick= {deletePerson} \n       />\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App' \nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}