(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t(1),c=t(15),s=t.n(c),o=t(6),u=t(3),i=function(e){var n=e.value,t=e.onChange;return Object(a.jsxs)("div",{children:["filtering with: ",Object(a.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.onSubmit,t=e.newName,r=e.newNumber,c=e.onChangeName,s=e.onChangeNumber;return Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:t,onChange:c})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:r,onChange:s})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.onClick;return Object(a.jsxs)(a.Fragment,{children:[n.name," \xa0\xa0",n.number," \xa0\xa0",Object(a.jsx)("button",{onClick:t,children:"delete"})]})},m=function(e){var n=e.toShow,t=e.onClick;return n.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(d,{person:e,onClick:t(e.id)},e.id)},e.id)}))},b=t(4),j=t.n(b),f="/api/persons",h={getAll:function(){return j.a.get(f).then((function(e){return e.data}))},create:function(e){return j.a.post(f,e).then((function(e){return e.data}))},del:function(e){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}},g=function(e){var n=e.message,t=e.messageClass;return""===n?null:Object(a.jsx)("div",{className:t,children:n})},O=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],s=Object(r.useState)(""),d=Object(u.a)(s,2),b=d[0],j=d[1],f=Object(r.useState)(""),O=Object(u.a)(f,2),v=O[0],p=O[1],C=Object(r.useState)(""),x=Object(u.a)(C,2),w=x[0],k=x[1],N=Object(r.useState)({message:"",messageClass:"nothing"}),S=Object(u.a)(N,2),A=S[0],y=S[1];Object(r.useEffect)((function(){h.getAll().then((function(e){return c(e)}))}),[]);var D=function(e){setTimeout((function(){return y({message:"",messageClass:"nothing"})}),e),j(""),p("")},E=function(e){return t.find((function(n){return n.name===e.name}))},J=""===w?t:t.filter((function(e){return e.name.toLowerCase().startsWith(w.toLowerCase())}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phoneebook"}),Object(a.jsx)(g,{message:A.message,messageClass:A.messageClass}),Object(a.jsx)(i,{value:w,onChange:function(e){console.log(e.target.value),k(e.target.value)}}),Object(a.jsx)("h3",{children:"Add a new"}),Object(a.jsx)(l,{onSubmit:function(e){e.preventDefault();var n={name:b,number:v},a=E(n);if(a){var r="".concat(n.name," is already added to the book! Replace the old \n          number with the new one?");if(window.confirm(r)){var s=Object(o.a)(Object(o.a)({},a),{},{number:n.number}),u=a.id;h.update(u,s).then((function(e){c(t.map((function(n){return n.id!==u?n:e}))),y({message:"".concat(s.name," data are updated"),messageClass:"personUpdate"}),D(4e3)})).catch((function(e){var n=t.filter((function(e){return e.id!==u}));c(n),y({message:"Person ".concat(s.name," was already deleted!"),messageClass:"errorDeleted"}),D(4e3)}))}else j(""),p("")}else h.create(n).then((function(e){c(t.concat(e)),y({message:"Added ".concat(n.name),messageClass:"personAdd"}),D(4e3)})).catch((function(e){console.log(e.response.data),y({message:e.response.data.error,messageClass:"validationError"}),D(4e3)}))},newName:b,newNumber:v,onChangeName:function(e){console.log(e.target.value),j(e.target.value)},onChangeNumber:function(e){console.log(e.target.value),p(e.target.value)}}),Object(a.jsx)("h3",{children:"Numbers"}),Object(a.jsx)(m,{toShow:J,onClick:function(e){return function(){var n=t.find((function(n){return n.id===e}));window.confirm('Delete  "'.concat(n.name,'" ?'))&&(h.del(e).then((function(n){var a=t.filter((function(n){return n.id!==e}));c(a)})),y({message:"".concat(n.name," data are deleted"),messageClass:"personDelete"}),D(4e3))}}})]})};t(38);s.a.render(Object(a.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b0e76123.chunk.js.map